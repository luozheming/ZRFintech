import{_ as e,u as t}from"./useTable.9db56aae.js";import"./useForm.e543e3b5.js";import{b as a}from"./useModal.138967e3.js";import o from"./Modal.d6870fc1.js";import{e as s,dH as n,dB as r,dI as i,dD as d,dJ as l,dF as c,aw as p,y as m,r as u,o as f,m as b,n as j,C as h,D as v,E as x}from"./index.e5737575.js";import{A as g}from"./index.ec78d9b4.js";import"./get.d713ad9e.js";import"./index.0e4b6b68.js";import"./scrollTo.c1e0f75f.js";import"./onMountedOrActivated.9f5fb634.js";import"./index.ebc0e24c.js";import"./UpOutlined.7632f672.js";import"./index.be4ab8c9.js";import"./useWindowSizeFn.cd822dd7.js";import"./index.8d8da54b.js";import"./useSortable.4ac0939c.js";import"./RedoOutlined.87ae5366.js";import"./_baseIteratee.4a5bce24.js";import"./FullscreenOutlined.b2c49886.js";import"./index.dba09550.js";import"./index.8cefef3f.js";import"./responsiveObserve.c545f1cc.js";import"./vendor.afa0338c.js";import"./index.57a6dbfc.js";import"./index.a370f084.js";import"./CountdownInput.9c3f7a10.js";import"./download.c317d8b9.js";const w=[{title:"投资人姓名",dataIndex:"investor",editComponentProps:{prefix:"$"},width:100},{title:"头像",dataIndex:"invesPhotoRoute",width:200,slots:{customRender:"avatar"}},{title:"手机号",dataIndex:"phoneNm",width:100}];var C=s({components:{BasicTable:e,Modal:o,Avatar:g,[n.name]:n},setup(){const e=p(),{createMessage:o}=m(),{VITE_GLOB_API_URL:s}=r(),[n,{openModal:u}]=a(),[f,{reload:b}]=t({title:"投资人列表",api:i,columns:w,showIndexColumn:!0,bordered:!1,size:"small",actionColumn:{width:200,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});return{registerTable:f,handleDetail:function(e){u(!0,{record:e})},registerModal:n,handleCreate:function(){e("/investor/add")},openModal:u,handleSuccess:function(){b()},onChange:e=>{return t=this,a=null,n=function*(){let t=0===(e.status?e.status:0)?1:0;const a=yield d({url:s+l,method:"post",data:{investorId:e.investorId,status:t},transformRequest:[function(e){return e=c.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{code:n,message:r}=a.data;200===n?b():o.warning(r)},new Promise(((e,o)=>{var s=e=>{try{i(n.next(e))}catch(t){o(t)}},r=e=>{try{i(n.throw(e))}catch(t){o(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,r);i((n=n.apply(t,a)).next())}));var t,a,n}}}});const y=v(" 新增投资人 "),I=v("查看详情");C.render=function(e,t,a,o,s,n){const r=u("a-button"),i=u("Avatar"),d=u("a-popconfirm"),l=u("BasicTable"),c=u("Modal");return f(),b("div",null,[j(l,{showTableSetting:"",onRegister:e.registerTable},{toolbar:h((()=>[j(r,{type:"primary",onClick:e.handleCreate},{default:h((()=>[y])),_:1},8,["onClick"])])),avatar:h((({record:e})=>[j(i,{size:64,src:`data:image/png;base64,${e.photo}`},null,8,["src"])])),action:h((({record:t})=>[j(r,{class:"mr-2",type:"primary",disabled:1===t.status,shape:"round",onClick:a=>e.handleDetail(t)},{default:h((()=>[I])),_:2},1032,["disabled","onClick"]),j(d,{title:`是否对该投资人${1===t.status?"启用":"禁用"}权限?`,onConfirm:a=>e.onChange(t)},{default:h((()=>[j(r,{type:t.status?"primary":"",shape:"round"},{default:h((()=>[v(x(1===t.status?"启用":"禁用")+"权限",1)])),_:2},1032,["type"])])),_:2},1032,["title","onConfirm"])])),_:1},8,["onRegister"]),j(c,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])};export default C;
