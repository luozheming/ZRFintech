var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,a=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(n)for(var l of n(a))o.call(a,l)&&r(e,l,a[l]);return e};import{_ as l}from"./useModal.168263c7.js";import{n as s,a3 as c,Y as i,a4 as u,dO as d,dP as p,F as f,a7 as m,e as b,a8 as v,R as y,S as h,p as x,ag as g,ah as j,bX as C,a6 as w,af as O,aI as P,g as D,df as S,k,v as I,aY as M,a0 as E,aq as z,cI as L,dQ as N,b1 as W,cL as A,j as B,r as $,o as F,m as R,C as V}from"./index.07990433.js";import{r as Y,a as _}from"./responsiveObserve.c545f1cc.js";import{g as q}from"./get.a1614c7c.js";import{getDescSchema as Q}from"./data.a6058545.js";import"./useWindowSizeFn.ca89b1f4.js";import"./FullscreenOutlined.c95c55ff.js";import"./vendor.afa0338c.js";import"./index.5a64e8c2.js";function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){return null!=e}var H=function(e){var t,n=e.itemPrefixCls,o=e.component,r=e.span,a=e.bordered,l=e.label,c=e.content,i=e.colon,u=o;return a?s(u,{class:[(t={},X(t,"".concat(n,"-item-label"),G(l)),X(t,"".concat(n,"-item-content"),G(c)),t)],colSpan:r},{default:function(){return[G(l)?l:c]}}):s(u,{class:["".concat(n,"-item")],colSpan:r},{default:function(){return[l&&s("span",{class:["".concat(n,"-item-label"),X({},"".concat(n,"-item-no-colon"),!i)]},[l]),c&&s("span",{class:"".concat(n,"-item-content")},[c])]}})},J=function(e){var t=function(e,t,n){var o=t.colon,r=t.prefixCls,a=t.bordered,l=n.component,f=n.type,m=n.showLabel,b=n.showContent;return e.map((function(e,t){var n=c(e),v=n.prefixCls,y=void 0===v?r:v,h=n.span,x=void 0===h?1:h,g=i(e,"label"),j=u(e),C=d(e),w=p(e),O=e.key;return"string"==typeof l?s(H,{key:"".concat(f,"-").concat(O||t),class:C,style:w,span:x,colon:o,component:l,itemPrefixCls:y,bordered:a,label:m?g:null,content:b?j:null},null):[s(H,{key:"label-".concat(O||t),class:C,style:w,span:1,colon:o,component:l[0],itemPrefixCls:y,bordered:a,label:g},null),s(H,{key:"content-".concat(O||t),class:C,style:w,span:2*x-1,component:l[1],itemPrefixCls:y,bordered:a,content:j},null)]}))},n=e.prefixCls,o=e.vertical,r=e.row,a=e.index,l=e.bordered;return o?s(f,null,[s("tr",{key:"label-".concat(a),class:"".concat(n,"-row")},[t(r,e,{component:"th",type:"label",showLabel:!0})]),s("tr",{key:"content-".concat(a),class:"".concat(n,"-row")},[t(r,e,{component:"td",type:"content",showContent:!0})])]):s("tr",{key:a,class:"".concat(n,"-row")},[t(r,e,{component:l?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0})])};function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}m.string,m.any,m.number;var U=b({name:"ADescriptionsItem",props:{prefixCls:m.string,label:m.VNodeChild,span:m.number.def(1)},render:function(){return null}}),Z={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function ee(e,t,n){var o=e;return(void 0===t||t>n)&&(o=w(e,{span:n}),O(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}var te={prefixCls:m.string,bordered:m.looseBool,size:m.oneOf(v("default","middle","small")).def("default"),title:m.VNodeChild,extra:m.VNodeChild,column:{type:[Number,Object],default:function(){return Z}},layout:m.oneOf(v("horizontal","vertical")),colon:m.looseBool},ne=b({name:"ADescriptions",Item:U,setup:function(e,t){var n,o=t.slots,r=y("configProvider",h).getPrefixCls,a=x({});return g((function(){n=Y.subscribe((function(t){"object"===T(e.column)&&(a.value=t)}))})),j((function(){Y.unsubscribe(n)})),function(){var t,n,l,c,i=e.prefixCls,u=e.column,d=e.size,p=e.bordered,f=void 0!==p&&p,m=e.layout,b=void 0===m?"horizontal":m,v=e.colon,y=void 0===v||v,h=e.title,x=void 0===h?null===(n=o.title)||void 0===n?void 0:n.call(o):h,g=e.extra,j=void 0===g?null===(l=o.extra)||void 0===l?void 0:l.call(o):g,w=r("descriptions",i),O=function(e,t){if("number"==typeof e)return e;if("object"===T(e))for(var n=0;n<_.length;n++){var o=_[n];if(t[o]&&void 0!==e[o])return e[o]||Z[o]}return 3}(u,a.value),P=function(e,t){var n=C(e),o=[],r=[],a=t;return n.forEach((function(e,l){var s,c=null===(s=e.props)||void 0===s?void 0:s.span,i=c||1;if(l===n.length-1)return r.push(ee(e,c,a)),void o.push(r);i<a?(a-=i,r.push(e)):(r.push(ee(e,i,a)),o.push(r),a=t,r=[])})),o}(null===(c=o.default)||void 0===c?void 0:c.call(o),O);return s("div",{class:[w,(t={},K(t,"".concat(w,"-").concat(d),"default"!==d),K(t,"".concat(w,"-bordered"),!!f),t)]},[(x||j)&&s("div",{class:"".concat(w,"-header")},[s("div",{class:"".concat(w,"-title")},[x]),s("div",{class:"".concat(w,"-extra")},[j])]),s("div",{class:"".concat(w,"-view")},[s("table",null,[s("tbody",null,[P.map((function(e,t){return s(J,{key:t,index:t,colon:y,prefixCls:w,vertical:"vertical"===b,bordered:f,row:e},null)}))])])])])}}});ne.props=te,ne.install=function(e){return e.component(ne.name,ne),e.component(ne.Item.name,ne.Item),e};var oe=b({name:"Description",props:{useCollapse:P.bool.def(!0),title:P.string.def(""),size:P.oneOf(["small","default","middle",void 0]).def("small"),bordered:P.bool.def(!0),column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:P.object},emits:["register"],setup(e,{slots:t,emit:n}){const o=x(null),{prefixCls:r}=D("description"),l=S(),c=k((()=>a(a({},e),I(o)))),i=k((()=>a(a({},I(c)),{title:void 0}))),u=k((()=>!!I(c).title)),d=k((()=>a({canExpand:!1},I(i).collapseOptions))),p=k((()=>a(a({},I(l)),I(i))));function f({label:e,labelMinWidth:t,labelStyle:n}){if(!n&&!t)return e;const o=a(a({},n),{minWidth:`${t}px `});return s("div",{style:o},[e])}const m=()=>{let e;return s(ne,z({class:`${r}`},I(p)),"function"==typeof(t=e=function(){const{schema:e,data:t}=I(i);return I(e).map((e=>{const{render:n,field:o,span:r,show:a,contentMinWidth:l}=e;if(a&&M(a)&&!a(t))return null;const c=()=>{var e;const t=null==(e=I(i))?void 0:e.data;if(!t)return null;const r=q(t,o);return M(n)?n(r,t):null!=r?r:""},u=l;return s(ne.Item,{label:f(e),key:o,span:r},{default:()=>l?s("div",{style:{minWidth:`${u}px`}},[c()]):c()})})).filter((e=>!!e))}())||"[object Object]"===Object.prototype.toString.call(t)&&!E(t)?e:{default:()=>[e]});var t};return n("register",{setDescProps:function(e){o.value=a(a({},I(o)),e)}}),()=>I(u)?(()=>{const n=e.useCollapse?m():s("div",null,[m()]);if(!e.useCollapse)return n;const{canExpand:o,helpMessage:r}=I(d),{title:a}=I(c);return s(N,{title:a,canExpan:o,helpMessage:r},{default:()=>n,action:()=>L(t,"action")})})():m()}});var re=b({name:"ErrorLogDetailModal",components:{BasicModal:l,Description:oe},props:{info:{type:Object,default:null}},setup(){const{t:e}=B(),[t]=function(e){if(!W())throw new Error("Please put useDescription function in the setup function!");const t=x(null),n=x(!1);return[function(o){I(n)&&A()||(t.value=o,e&&o.setDescProps(e),n.value=!0)},{setDescProps:e=>{var n;null==(n=I(t))||n.setDescProps(e)}}]}({column:2,schema:Q()});return{register:t,useI18n:B,t:e}}});re.render=function(e,t,n,o,r,a){const l=$("Description"),c=$("BasicModal");return F(),R(c,z({width:800,title:e.t("sys.errorLog.tableActionDesc")},e.$attrs),{default:V((()=>[s(l,{data:e.info,onRegister:e.register},null,8,["data","onRegister"])])),_:1},16,["title"])};export default re;
