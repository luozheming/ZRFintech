import{e,B as a,I as s,j as o,g as t,p as n,q as r,s as l,k as i,v as m,K as u,w as c,x as d,y as p,r as g,o as f,m as v,z as y,A as w,n as h,C as x,D as F,E as L,F as b}from"./index.07990433.js";import{C as j,R as I}from"./index.778715f0.js";import{F as S}from"./index.1828b0a7.js";import"./index.67bb3c1c.js";import{_ as D,u as C,a as R,L as _,b as T}from"./LoginFormTitle.3c11bd18.js";import"./vendor.afa0338c.js";import"./_baseIteratee.683af660.js";import"./get.a1614c7c.js";import"./responsiveObserve.c545f1cc.js";var k=e({name:"LoginForm",components:{[j.name]:j,[I.name]:I,Button:a,Form:S,FormItem:S.Item,Input:s,LoginFormTitle:D,InputPassword:s.Password},setup(){const{t:e}=o(),{notification:a}=p(),{prefixCls:s}=t("login"),{setLoginState:g,getLoginState:f}=C(),{getFormRules:v}=R(),y=n(null),w=n(!1),h=n(!1),x=r({account:"",password:""}),{validForm:F}=T(y);l(["enter"],(e=>{e.keyCode===u.ENTER&&b()}));const L=i((()=>m(f)===_.LOGIN));function b(){return s=this,o=null,t=function*(){const s=yield F();if(s)try{w.value=!0;const o=yield c.login(d({password:s.password,phoneNm:s.account}));o&&a.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${o.userName}`,duration:3})}finally{w.value=!1}},new Promise(((e,a)=>{var n=e=>{try{l(t.next(e))}catch(s){a(s)}},r=e=>{try{l(t.throw(e))}catch(s){a(s)}},l=a=>a.done?e(a.value):Promise.resolve(a.value).then(n,r);l((t=t.apply(s,o)).next())}));var s,o,t}return{t:e,prefixCls:s,formRef:y,formData:x,getFormRules:v,rememberMe:h,handleLogin:b,loading:w,setLoginState:g,LoginStateEnum:_,getShow:L}}});k.render=function(e,a,s,o,t,n){const r=g("LoginFormTitle"),l=g("Input"),i=g("FormItem"),m=g("InputPassword"),u=g("Button"),c=g("Form");return f(),v(b,null,[y(h(r,{class:"enter-x"},null,512),[[w,e.getShow]]),y(h(c,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:x((()=>[h(i,{name:"account",class:"enter-x"},{default:x((()=>[h(l,{size:"large",value:e.formData.account,"onUpdate:value":a[1]||(a[1]=a=>e.formData.account=a),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),h(i,{name:"password",class:"enter-x"},{default:x((()=>[h(m,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":a[2]||(a[2]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),h(i,{class:"enter-x"},{default:x((()=>[h(u,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:x((()=>[F(L(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"]),[[w,e.getShow]])],64)};export default k;
