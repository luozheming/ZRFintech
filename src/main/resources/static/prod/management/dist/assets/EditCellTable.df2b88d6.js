import{_ as e,u as t}from"./useTable.f5ff65b6.js";import"./useForm.623c8743.js";import{b as o}from"./useModal.168263c7.js";import s from"./Modal.0743a0da.js";import{e as a,dC as n,dD as r,dE as i,dF as d,dG as c,dH as l,aw as p,y as m,r as u,o as f,m as j,n as h,C as b,D as x,E as v}from"./index.07990433.js";import{A as g}from"./index.4c3a38d2.js";import"./get.a1614c7c.js";import"./index.d1f7687b.js";import"./scrollTo.c1e0f75f.js";import"./onMountedOrActivated.04dc6483.js";import"./index.2a37053b.js";import"./UpOutlined.d7cd4b3d.js";import"./index.76cee461.js";import"./useWindowSizeFn.ca89b1f4.js";import"./index.002d44d3.js";import"./useSortable.a7af846f.js";import"./RedoOutlined.fd8cf209.js";import"./_baseIteratee.683af660.js";import"./FullscreenOutlined.c95c55ff.js";import"./index.1828b0a7.js";import"./index.67bb3c1c.js";import"./responsiveObserve.c545f1cc.js";import"./vendor.afa0338c.js";import"./index.778715f0.js";import"./index.5a64e8c2.js";import"./CountdownInput.6eca182a.js";import"./download.1003955c.js";const C=[{title:"投资人姓名",dataIndex:"investor",editComponentProps:{prefix:"$"},width:100},{title:"头像",dataIndex:"invesPhotoRoute",width:200,slots:{customRender:"img"}},{title:"手机号",dataIndex:"phoneNm",width:200}];var w=a({components:{BasicTable:e,Modal:s,Avatar:g,[n.name]:n},setup(){const e=p(),{createMessage:s}=m(),{VITE_GLOB_API_URL:a}=r(),[n,{openModal:u}]=o(),[f,{reload:j}]=t({title:"投资人列表",api:i,columns:C,showIndexColumn:!0,bordered:!1,actionColumn:{width:200,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});return{registerTable:f,handleDetail:function(e){u(!0,{record:e})},registerModal:n,handleCreate:function(){e("/investor/add")},openModal:u,handleSuccess:function(){j()},onChange:e=>{return t=this,o=null,n=function*(){const t=0===e.status?1:0,o=yield d({url:a+c,method:"post",data:{investorId:e.investorId,status:t},transformRequest:[function(e){return e=l.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{code:n,message:r}=o.data;200===n?j():s.warning(r)},new Promise(((e,s)=>{var a=e=>{try{i(n.next(e))}catch(t){s(t)}},r=e=>{try{i(n.throw(e))}catch(t){s(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);i((n=n.apply(t,o)).next())}));var t,o,n}}}});const y={class:"p-4"},I=x(" 新增投资人 "),M=x("查看详情");w.render=function(e,t,o,s,a,n){const r=u("a-button"),i=u("Avatar"),d=u("a-popconfirm"),c=u("BasicTable"),l=u("Modal");return f(),j("div",y,[h(c,{showTableSetting:"",onRegister:e.registerTable},{toolbar:b((()=>[h(r,{type:"primary",onClick:e.handleCreate},{default:b((()=>[I])),_:1},8,["onClick"])])),img:b((({record:e})=>[h(i,{size:64,src:e.photo},null,8,["src"])])),action:b((({record:t})=>[h(r,{class:"mr-2",type:"primary",disabled:1===t.status,shape:"round",onClick:o=>e.handleDetail(t)},{default:b((()=>[M])),_:2},1032,["disabled","onClick"]),h(d,{title:"确认对该投资人进行禁止权限的操作吗?",onConfirm:o=>e.onChange(t)},{default:b((()=>[h(r,{type:t.status?"primary":"",shape:"round"},{default:b((()=>[x(v(1===t.status?"开放权限":"禁止权限"),1)])),_:2},1032,["type"])])),_:2},1032,["onConfirm"])])),_:1},8,["onRegister"]),h(l,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])};export default w;
