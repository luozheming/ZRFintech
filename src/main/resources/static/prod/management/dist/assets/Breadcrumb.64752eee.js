var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,l)=>{for(var o in l||(l={}))t.call(l,o)&&n(e,o,l[o]);if(a)for(var o of a(l))r.call(l,o)&&n(e,o,l[o]);return e};import{B as o}from"./index.cdf0cf3e.js";import{e as u,aM as i,aI as s,p as c,aT as d,g as m,j as v,a$ as h,aV as p,bk as f,aR as b,e4 as y,bo as g,cD as C,aw as k,r as x,o as w,m as j,n as O,C as B,aN as I,E as P,D as M}from"./index.aa79050f.js";import"./vendor.afa0338c.js";var R=u({name:"LayoutBreadcrumb",components:{Icon:i,[o.name]:o},props:{theme:s.oneOf(["dark","light"])},setup(){const e=c([]),{currentRoute:t}=d(),{prefixCls:a}=m("layout-breadcrumb"),{getShowBreadCrumbIcon:r}=g(),{t:n}=v();function o(e,t){const a=[];return e.forEach((e=>{var r,n;t.includes(e.path)&&a.push(l(l({},e),{name:(null==(r=e.meta)?void 0:r.title)||e.name})),(null==(n=e.children)?void 0:n.length)&&a.push(...o(e.children,t))})),a}return h((()=>{return a=this,r=null,n=function*(){var a,r,n;if(t.value.name===p)return;const u=yield f(),i=t.value.matched,s=null==i?void 0:i[i.length-1];let c=t.value.path;s&&(null==(a=null==s?void 0:s.meta)?void 0:a.currentActiveMenu)&&(c=s.meta.currentActiveMenu);const d=b(u,c),m=o(u.filter((e=>e.path===d[0])),d);if(!m||0===m.length)return;const v=y(m,(e=>{const{meta:t,name:a}=e;if(!t)return!!a;const{title:r,hideBreadcrumb:n,hideMenu:l}=t;return!(!r||n||l)})).filter((e=>{var t,a;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)||!(null==(a=e.meta)?void 0:a.hideMenu)}));(null==(r=t.value.meta)?void 0:r.currentActiveMenu)&&v.push(l(l({},t.value),{name:(null==(n=t.value.meta)?void 0:n.title)||t.value.name})),e.value=v},new Promise(((e,t)=>{var l=e=>{try{u(n.next(e))}catch(a){t(a)}},o=e=>{try{u(n.throw(e))}catch(a){t(a)}},u=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);u((n=n.apply(a,r)).next())}));var a,r,n})),{routes:e,t:n,prefixCls:a,getShowBreadCrumbIcon:r,handleClick:function(e,t,a){null==a||a.preventDefault();const{children:r,redirect:n,meta:l}=e;if((null==r?void 0:r.length)&&!n)return void(null==a||a.stopPropagation());if(null==l?void 0:l.carryParam)return;const o=k();if(n&&C(n))o(n);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,o(e)}},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}});const $={key:1};R.render=function(e,t,a,r,n,l){const o=x("Icon"),u=x("router-link"),i=x("a-breadcrumb");return w(),j("div",{class:[e.prefixCls,`${e.prefixCls}--${e.theme}`]},[O(i,{routes:e.routes},{itemRender:B((({route:t,routes:a,paths:r})=>[e.getShowBreadCrumbIcon&&t.meta.icon?(w(),j(o,{key:0,icon:t.meta.icon},null,8,["icon"])):I("",!0),e.hasRedirect(a,t)?(w(),j(u,{key:2,to:"",onClick:a=>e.handleClick(t,r,a)},{default:B((()=>[M(P(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(w(),j("span",$,P(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)};export default R;
