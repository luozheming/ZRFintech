var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,n=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,l=(e,l)=>{for(var o in l||(l={}))t.call(l,o)&&n(e,o,l[o]);if(r)for(var o of r(l))a.call(l,o)&&n(e,o,l[o]);return e};import{e as o,aH as u,aD as i,q as s,aN as c,g as d,j as m,aV as v,aP as h,be as p,aL as f,er as b,bi as y,cD as g,ax as x,r as C,o as k,m as j,n as w,D as O,p as P,F as B,E as I}from"./index.e3ab3d33.js";import{B as M}from"./index.54d93a87.js";import"./vendor.afa0338c.js";var D=o({name:"LayoutBreadcrumb",components:{Icon:u,[M.name]:M},props:{theme:i.oneOf(["dark","light"])},setup(){const e=s([]),{currentRoute:t}=c(),{prefixCls:r}=d("layout-breadcrumb"),{getShowBreadCrumbIcon:a}=y(),{t:n}=m();function o(e,t){const r=[];return e.forEach((e=>{var a,n;t.includes(e.path)&&r.push(l(l({},e),{name:(null==(a=e.meta)?void 0:a.title)||e.name})),(null==(n=e.children)?void 0:n.length)&&r.push(...o(e.children,t))})),r}return v((()=>{return r=this,a=null,n=function*(){var r,a,n;if(t.value.name===h)return;const u=yield p(),i=t.value.matched,s=null==i?void 0:i[i.length-1];let c=t.value.path;s&&(null==(r=null==s?void 0:s.meta)?void 0:r.currentActiveMenu)&&(c=s.meta.currentActiveMenu);const d=f(u,c),m=o(u.filter((e=>e.path===d[0])),d);if(!m||0===m.length)return;const v=b(m,(e=>{const{meta:t,name:r}=e;if(!t)return!!r;const{title:a,hideBreadcrumb:n,hideMenu:l}=t;return!(!a||n||l)})).filter((e=>{var t,r;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)||!(null==(r=e.meta)?void 0:r.hideMenu)}));(null==(a=t.value.meta)?void 0:a.currentActiveMenu)&&v.push(l(l({},t.value),{name:(null==(n=t.value.meta)?void 0:n.title)||t.value.name})),e.value=v},new Promise(((e,t)=>{var l=e=>{try{u(n.next(e))}catch(r){t(r)}},o=e=>{try{u(n.throw(e))}catch(r){t(r)}},u=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);u((n=n.apply(r,a)).next())}));var r,a,n})),{routes:e,t:n,prefixCls:r,getShowBreadCrumbIcon:a,handleClick:function(e,t,r){null==r||r.preventDefault();const{children:a,redirect:n,meta:l}=e;if((null==a?void 0:a.length)&&!n)return void(null==r||r.stopPropagation());if(null==l?void 0:l.carryParam)return;const o=x();if(n&&g(n))o(n);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,o(e)}},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}});const R={key:1};D.render=function(e,t,r,a,n,l){const o=C("Icon"),u=C("router-link"),i=C("a-breadcrumb");return k(),j("div",{class:[e.prefixCls,`${e.prefixCls}--${e.theme}`]},[w(i,{routes:e.routes},{itemRender:O((({route:t,routes:r,paths:a})=>[e.getShowBreadCrumbIcon&&t.meta.icon?(k(),j(o,{key:0,icon:t.meta.icon},null,8,["icon"])):P("v-if",!0),e.hasRedirect(r,t)?(k(),j(u,{key:2,to:"",onClick:r=>e.handleClick(t,a,r)},{default:O((()=>[I(B(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(k(),j("span",R,B(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)};export default D;
