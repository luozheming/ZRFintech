var e=Object.defineProperty,o=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,l=(o,r,t)=>r in o?e(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,a=(e,a)=>{for(var s in a||(a={}))o.call(a,s)&&l(e,s,a[s]);if(r)for(var s of r(a))t.call(a,s)&&l(e,s,a[s]);return e},s=(e,o,r)=>new Promise(((t,l)=>{var a=e=>{try{n(r.next(e))}catch(o){l(o)}},s=e=>{try{n(r.throw(e))}catch(o){l(o)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,s);n((r=r.apply(e,o)).next())}));import{g as n,U as i,h as d}from"./useForm.4c49c850.js";import{e as p,cy as u,dz as c,av as m,q as f,dB as b,bE as g,z as v,r as P,o as h,m as y,D as j,n as w,E as I}from"./index.e3ab3d33.js";import{_ as C}from"./PageWrapper.c0a4b726.js";import{C as F}from"./index.a36c92d1.js";import"./index.b1c23541.js";import"./index.ec624549.js";import"./index.c9e49986.js";import"./vendor.afa0338c.js";import"./_baseIteratee.3a82d812.js";import"./get.92310d4b.js";import"./index.002624d4.js";import"./index.40de8c80.js";import"./index.69962a4d.js";import"./warning.0b2da52a.js";import"./index.2561698d.js";import"./CountdownInput.4bcf5023.js";import"./useModal.ee72b48f.js";import"./useWindowSizeFn.24a861a8.js";import"./FullscreenOutlined.b1e97c8e.js";import"./index.5a1e8da2.js";import"./RedoOutlined.2b7b81e2.js";import"./download.00911bd8.js";import"./index.dfffa629.js";import"./usePageContext.1db28fd6.js";import"./index.54d93a87.js";import"./index.19c35a2b.js";import"./onMountedOrActivated.b2e3d7a3.js";import"./transButton.eec12e03.js";import"./ArrowLeftOutlined.b045200c.js";import"./responsiveObserve.c545f1cc.js";const A=[{field:"investor",component:"Input",label:"姓名",required:!0},{field:"invesEmail",component:"Input",label:"邮箱",required:!0,colProps:{offset:2},componentProps:{type:"email"}},{field:"orgNm",component:"Input",label:"任职机构",required:!0},{field:"phoneNm",component:"Input",label:"联系电话",required:!0,colProps:{offset:2},componentProps:{maxLength:11}},{field:"price",component:"Input",label:"单价",required:!0},{field:"questionPrice",component:"Input",label:"追问价格",required:!0,colProps:{offset:2}},{field:"disCountPrice",component:"Input",label:"资费折扣价",required:!0},{field:"onlinePrice",component:"Input",label:"1V1交流(线上)原价",required:!0,colProps:{offset:2}},{field:"onlineDisCountPrice",component:"Input",label:"1V1交流(线上)折扣价",required:!0},{field:"bpMadePrice",component:"Input",label:"定制商业计划书资费原价",required:!0,colProps:{offset:2}},{field:"bpMadeDisCountPrice",component:"Input",label:"定制商业计划书资费折扣价",required:!0}],_=[{field:"indusLab1",component:"Input",label:"标签1",required:!0},{field:"indusLab2",component:"Input",label:"标签2",required:!0,colProps:{offset:2}},{field:"indusLab3",component:"Input",label:"标签3",defaultValue:""},{field:"indusLab4",component:"Input",label:"标签4",colProps:{offset:2},defaultValue:""},{field:"indusLab5",component:"Input",label:"标签5",defaultValue:""}],q=[{field:"focusFiled",component:"Select",label:"投资偏好（关注领域）",colProps:{span:8},componentProps:{mode:"multiple",options:["AI","AR / VR","材料","地产建筑","电商","房产家居","工具","公共事业","光电","互联网","化工","环保","机器人","教育","金融","旅游","能源矿产","农业","O2O","企业服务","汽车交通","社交","生产制造","体育","文娱传媒","无人机","物流","消费生活","新消费","医疗健康","硬件","游戏","智能制造","其它"].map(((e,o)=>({label:e,value:e,key:o})))},rules:[{required:!0,type:"array",validator:(e,o)=>s(this,null,(function*(){return o?o.length>3?Promise.reject("最多选择3个"):Promise.resolve():Promise.reject("请选择投资偏好")})),trigger:"change"}]}],x=[{field:"finRound",component:"Select",label:"投资阶段偏好",colProps:{span:8},componentProps:{mode:"multiple",options:[{label:"种子轮",value:"种子轮",key:"1"},{label:"天使轮",value:"天使轮",key:"2"},{label:"Pre-A轮",value:"Pre-A轮",key:"3"},{label:"A轮",value:"A轮",key:"4"},{label:"A轮以上",value:"A轮以上",key:"5"}]},rules:[{required:!0,type:"array",validator:(e,o)=>s(this,null,(function*(){return o?o.length>3?Promise.reject("最多选择3个"):Promise.resolve():Promise.reject("请选择投资阶段偏好")})),trigger:"change"}]}],L=[{field:"selfIntroduction",component:"InputTextArea",label:"自我介绍",componentProps:{placeholder:"详细的自我简介1000字以内（例如，现在的工作以及以往的工作经历，曾经获得的荣誉或奖励）",rows:8},required:!0,colProps:{offset:1}}];function R(e){return new Promise(((o,r)=>{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>o({result:t.result,file:e}),t.onerror=e=>r(e)}))}var U=p({components:{BasicForm:n,PageWrapper:C,[F.name]:F,Upload:i,[u.name]:u},setup(){const{VITE_GLOB_API_URL:e}=c();m();const o=f(!1),r=f(""),t=f(""),l=f(""),n=f([]),i=f([]),p=f([]),{closeCurrent:u}=g(),P=f(null),{createMessage:h}=v(),[y,{validate:j,resetFields:w}]=d({labelCol:{span:9},wrapperCol:{span:14},baseColProps:{span:8},showActionButtonGroup:!1,schemas:A}),[I,{validate:C,resetFields:F}]=d({labelCol:{span:7},wrapperCol:{span:16},baseColProps:{span:8},schemas:_,showActionButtonGroup:!1}),[U,{validate:k,resetFields:B}]=d({labelCol:{span:10},wrapperCol:{span:14},baseColProps:{span:6},schemas:q,showActionButtonGroup:!1}),[O,{validate:M,resetFields:S}]=d({labelCol:{span:7},wrapperCol:{span:16},baseColProps:{span:6},schemas:x,showActionButtonGroup:!1}),[V,{validate:z,resetFields:E}]=d({wrapperCol:{span:24},baseColProps:{span:10},schemas:L,showActionButtonGroup:!1});return{register:y,registerLabel:I,registerPreference:U,registerStage:O,registerIntroduction:V,submitAll:function(){return s(this,null,(function*(){try{P.value;const[t,s,d,c,m]=yield Promise.all([j(),C(),k(),M(),z()]);if(!r.value||!l.value)return h.warning("请上传必传文件");const f={indusLabList:Object.values(s)},g=a(a(a(a(a({},t),f),d),c),m),v=new FormData;Object.keys(g).forEach((e=>{v.append(e,g[e])})),v.append("photoFile",n.value),v.append("cardFile",i.value),v.append("orgphotoFile",p.value),o.value=!0;200===(yield b({url:e+"/investor/add",method:"post",data:v,headers:{"Content-Type":"multipart/form-data"}})).data.code&&(o.value=!1,h.success("提交成功！"),u())}catch(t){}}))},tableRef:P,fileList:n,business:i,logo:p,imageUrl:r,businessUrl:t,logoUrl:l,loading:o,resetFields:w,resetFieldsLabel:F,resetFieldsPreference:B,resetFieldsStage:S,resetFieldsIntroduction:E,beforeUpload:e=>new Promise(((o,t)=>e.size/1024/1024<4?(R(e).then((({result:e})=>{r.value=e})),n.value=e,t(!1)):(h.error("只能上传不超过4MB的文件!"),t(!1)))),beforeBusiness:e=>new Promise(((o,r)=>e.size/1024/1024<4?(R(e).then((({result:e})=>{t.value=e})),i.value=e,r(!1)):(h.error("只能上传不超过4MB的文件!"),r(!1)))),beforeLogo:e=>new Promise(((o,r)=>e.size/1024/1024<4?(R(e).then((({result:e})=>{l.value=e})),p.value=e,r(!1)):(h.error("只能上传不超过4MB的文件!"),r(!1))))}}});const k=w("label",{class:"ml-10 mr-5 ant-form-item-required ant-form-item-no-colon"},"请上传您的照片（不超过4M）",-1),B=I(" 选择文件 "),O=w("label",{class:"ml-10 mr-5 ant-form-item-no-colon"},"请上传您的个人名片",-1),M=I(" 选择文件 "),S=w("label",{class:"ml-10 mr-5 ant-form-item-required ant-form-item-no-colon"},"请上传您的机构logo",-1),V=I(" 选择文件 "),z=I(" 提交 ");U.render=function(e,o,r,t,l,a){const s=P("BasicForm"),n=P("a-card"),i=P("upload-outlined"),d=P("a-button"),p=P("Upload"),u=P("PageWrapper");return h(),y(u,{class:"high-form",contentBackground:"",contentClass:"p-10"},{rightFooter:j((()=>[w(d,{type:"primary",loading:e.loading,onClick:e.submitAll},{default:j((()=>[z])),_:1},8,["loading","onClick"])])),default:j((()=>[w(n,{title:"1.基本信息",bordered:!1},{default:j((()=>[w(s,{onRegister:e.register},null,8,["onRegister"])])),_:1}),w(n,{title:"2.请上传您的照片",bordered:!1,class:"mt-2"},{default:j((()=>[k,w(p,{"file-list":e.fileList,name:"avatar",class:"avatar-uploader","show-upload-list":!1,"before-upload":e.beforeUpload},{default:j((()=>[e.imageUrl?(h(),y("img",{key:0,src:e.imageUrl,alt:"avatar"},null,8,["src"])):(h(),y(d,{key:1,type:"primary"},{default:j((()=>[w(i),B])),_:1}))])),_:1},8,["file-list","before-upload"])])),_:1}),w(n,{title:"3.请填写2-5条个人标签句",bordered:!1,class:"mt-2"},{default:j((()=>[w(s,{onRegister:e.registerLabel},null,8,["onRegister"])])),_:1}),w(n,{title:"4.投资偏好（关注领域）（3个以内，例如人工智能，物联网等)",bordered:!1,class:"mt-2"},{default:j((()=>[w(s,{onRegister:e.registerPreference},null,8,["onRegister"])])),_:1}),w(n,{title:"5.投资阶段偏好（3个以内，例如种子，天使，Pre-A轮等)",bordered:!1,class:"mt-2"},{default:j((()=>[w(s,{onRegister:e.registerStage},null,8,["onRegister"])])),_:1}),w(n,{title:"6.自我介绍",bordered:!1,class:"mt-2"},{default:j((()=>[w(s,{onRegister:e.registerIntroduction},null,8,["onRegister"])])),_:1}),w(n,{title:"7.请上传您的个人名片",bordered:!1,class:"mt-2"},{default:j((()=>[O,w(p,{"file-list":e.business,"onUpdate:file-list":o[1]||(o[1]=o=>e.business=o),name:"business",class:"avatar-uploader","show-upload-list":!1,"before-upload":e.beforeBusiness},{default:j((()=>[e.businessUrl?(h(),y("img",{key:0,src:e.businessUrl,alt:"avatar"},null,8,["src"])):(h(),y(d,{key:1,type:"primary"},{default:j((()=>[w(i),M])),_:1}))])),_:1},8,["file-list","before-upload"])])),_:1}),w(n,{title:"8.请上传您的机构logo",bordered:!1},{default:j((()=>[S,w(p,{"file-list":e.logo,"onUpdate:file-list":o[2]||(o[2]=o=>e.logo=o),name:"logo",class:"avatar-uploader","show-upload-list":!1,"before-upload":e.beforeLogo},{default:j((()=>[e.logoUrl?(h(),y("img",{key:0,src:e.logoUrl,alt:"avatar"},null,8,["src"])):(h(),y(d,{key:1,type:"primary"},{default:j((()=>[w(i),V])),_:1}))])),_:1},8,["file-list","before-upload"])])),_:1})])),_:1})};export default U;
