import{e,q as r,j as o,aQ as t,X as s,W as a,eb as i,z as n,r as l,o as c,m as d,G as m,aJ as u,A as p,C as f,n as j,D as b,E as g,F as x}from"./index.e3ab3d33.js";import y from"./DetailModal.11d5e137.js";import{_ as v,u as E}from"./useTable.60891a80.js";import{k as w}from"./useForm.4c49c850.js";import{b as h}from"./useModal.ee72b48f.js";import{getColumns as C}from"./data.ec12c17d.js";import"./vendor.afa0338c.js";import"./index.vue_vue&type=script&lang.1c5306c2.js";import"./responsiveObserve.c545f1cc.js";import"./get.92310d4b.js";import"./index.002624d4.js";import"./index.69962a4d.js";import"./warning.0b2da52a.js";import"./index.2561698d.js";import"./useWindowSizeFn.24a861a8.js";import"./onMountedOrActivated.b2e3d7a3.js";import"./index.5a1e8da2.js";import"./useSortable.fc3e13de.js";import"./RedoOutlined.2b7b81e2.js";import"./_baseIteratee.3a82d812.js";import"./FullscreenOutlined.b1e97c8e.js";import"./scrollTo.c1e0f75f.js";import"./transButton.eec12e03.js";import"./index.c9e49986.js";import"./index.ec624549.js";import"./index.40de8c80.js";import"./CountdownInput.4bcf5023.js";import"./download.00911bd8.js";import"./index.dfffa629.js";var M=e({name:"ErrorHandler",components:{DetailModal:y,BasicTable:v,TableAction:w},setup(){const e=r(),l=r([]),{t:c}=o(),[d,{setTableData:m}]=E({title:c("sys.errorLog.tableTitle"),columns:C(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[u,{openModal:p}]=h();t((()=>i.getErrorInfoState),(e=>{s((()=>{m(a(e))}))}),{immediate:!0});const{createMessage:f}=n();return f.info(c("sys.errorLog.enableMessage")),{register:d,registerModal:u,handleDetail:function(r){e.value=r,p(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,r=null,o=function*(){},new Promise(((t,s)=>{var a=e=>{try{n(o.next(e))}catch(r){s(r)}},i=e=>{try{n(o.throw(e))}catch(r){s(r)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,i);n((o=o.apply(e,r)).next())}));var e,r,o},imgList:l,rowInfo:e,t:c}}});const k={class:"p-4"};M.render=function(e,r,o,t,s,a){const i=l("DetailModal"),n=l("a-button"),y=l("TableAction"),v=l("BasicTable");return c(),d("div",k,[(c(!0),d(m,null,u(e.imgList,(e=>p((c(),d("img",{key:e,src:e},null,8,["src"])),[[f,!1]]))),128)),j(i,{info:e.rowInfo,onRegister:e.registerModal},null,8,["info","onRegister"]),j(v,{onRegister:e.register,class:"error-handle-table"},{toolbar:b((()=>[j(n,{onClick:e.fireVueError,type:"primary"},{default:b((()=>[g(x(e.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),j(n,{onClick:e.fireResourceError,type:"primary"},{default:b((()=>[g(x(e.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),j(n,{onClick:e.fireAjaxError,type:"primary"},{default:b((()=>[g(x(e.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:b((({record:r})=>[j(y,{actions:[{label:e.t("sys.errorLog.tableActionDesc"),onClick:e.handleDetail.bind(null,r)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default M;
