import{e,B as t,I as n,j as o,g as s,q as a,s as l,v as i,k as r,w as m,K as c,x as u,y as d,z as g,r as p,o as f,m as y,A as x,C as v,n as h,D as w,p as F,E as C,F as S,G as L}from"./index.e3ab3d33.js";import{F as I}from"./index.c9e49986.js";import"./index.ec624549.js";import{_ as b,u as k,a as A,L as B,b as R}from"./LoginFormTitle.067c51e5.js";import{C as E,R as D}from"./index.dfffa629.js";import"./vendor.afa0338c.js";import"./_baseIteratee.3a82d812.js";import"./get.92310d4b.js";import"./responsiveObserve.c545f1cc.js";var j=e({name:"LoginForm",components:{[E.name]:E,[D.name]:D,Button:t,Form:I,FormItem:I.Item,Input:n,LoginFormTitle:b,InputPassword:n.Password},setup(){const{t:e}=o(),{notification:t}=g(),{prefixCls:n}=s("login"),{setLoginState:p,getLoginState:f}=k(),{getFormRules:y}=A(),x=a(null),v=a(!1),h=a(!1),w=l({account:"",password:""}),{validForm:F}=R(x);i(["enter"],(e=>{e.keyCode===c.ENTER&&S()}));const C=r((()=>m(f)===B.LOGIN));function S(){return n=this,o=null,s=function*(){const n=yield F();if(n)try{v.value=!0;const o=yield u.login(d({password:n.password,phoneNm:n.account}));o&&t.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${o.userName}`,duration:3})}finally{v.value=!1}},new Promise(((e,t)=>{var a=e=>{try{i(s.next(e))}catch(n){t(n)}},l=e=>{try{i(s.throw(e))}catch(n){t(n)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,l);i((s=s.apply(n,o)).next())}));var n,o,s}return{t:e,prefixCls:n,formRef:x,formData:w,getFormRules:y,rememberMe:h,handleLogin:S,loading:v,setLoginState:p,LoginStateEnum:B,getShow:C}}});j.render=function(e,t,n,o,s,a){const l=p("LoginFormTitle"),i=p("Input"),r=p("FormItem"),m=p("InputPassword"),c=p("Button"),u=p("Form");return f(),y(L,null,[x(h(l,{class:"enter-x"},null,512),[[v,e.getShow]]),x(h(u,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:w((()=>[h(r,{name:"account",class:"enter-x"},{default:w((()=>[h(i,{size:"large",value:e.formData.account,"onUpdate:value":t[1]||(t[1]=t=>e.formData.account=t),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),h(r,{name:"password",class:"enter-x"},{default:w((()=>[h(m,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":t[2]||(t[2]=t=>e.formData.password=t),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),F(' <ARow class="enter-x">\n      <ACol :span="12">\n        <FormItem>\n          No logic, you need to deal with it yourself\n          <Checkbox v-model:checked="rememberMe" size="small">\n            {{ t(\'sys.login.rememberMe\') }}\n          </Checkbox>\n        </FormItem>\n      </ACol>\n      <ACol :span="12">\n        <FormItem :style="{ \'text-align\': \'right\' }">\n          No logic, you need to deal with it yourself\n          <Button type="link" size="small" @click="setLoginState(LoginStateEnum.RESET_PASSWORD)">\n            {{ t(\'sys.login.forgetPassword\') }}\n          </Button>\n        </FormItem>\n      </ACol>\n    </ARow> '),h(r,{class:"enter-x"},{default:w((()=>[h(c,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:w((()=>[C(S(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"]),F(' <Button size="large" class="mt-4 enter-x" block @click="handleRegister">\n        {{ t(\'sys.login.registerButton\') }}\n      </Button> ')])),_:1}),F(' <ARow class="enter-x">\n      <ACol :xs="24" :md="8">\n        <Button block @click="setLoginState(LoginStateEnum.MOBILE)">\n          {{ t(\'sys.login.mobileSignInFormTitle\') }}\n        </Button>\n      </ACol>\n      <ACol :md="8" :xs="24" class="xs:my-2 md:my-0 xs:mx-0 md:mx-2">\n        <Button block @click="setLoginState(LoginStateEnum.QR_CODE)">\n          {{ t(\'sys.login.qrSignInFormTitle\') }}\n        </Button>\n      </ACol>\n      <ACol :md="7" :xs="24">\n        <Button block @click="setLoginState(LoginStateEnum.REGISTER)">\n          {{ t(\'sys.login.registerButton\') }}\n        </Button>\n      </ACol>\n    </ARow> '),F(" <Divider class=\"enter-x\">{{ t('sys.login.otherSignIn') }}</Divider> "),F(' <div class="flex justify-evenly enter-x" :class="`${prefixCls}-sign-in-way`">\n      <GithubFilled />\n      <WechatFilled />\n      <AlipayCircleFilled />\n      <GoogleCircleFilled />\n      <TwitterCircleFilled />\n    </div> ')])),_:1},8,["model","rules"]),[[v,e.getShow]])],64)};export default j;
