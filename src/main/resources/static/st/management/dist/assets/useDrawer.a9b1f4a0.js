var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,l=(t,o,s)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s,r=(e,r)=>{for(var a in r||(r={}))t.call(r,a)&&l(e,a,r[a]);if(o)for(var a of o(r))s.call(r,a)&&l(e,a,r[a]);return e};import{j as a,aD as n,e as i,g as c,k as u,r as p,o as d,m as f,G as g,aY as b,ar as h,D as w,E as v,F as C,p as m,cH as k,n as y,bh as D,q as x,df as O,dp as $,w as P,y as B,cB as T,aV as _,aQ as F,X as j,aX as S,aS as L,bw as H,bA as V,A,aJ as I,s as M,cK as N,ae as E,cM as R}from"./index.e3ab3d33.js";import{D as X}from"./index.bc6584c8.js";import{A as q}from"./ArrowLeftOutlined.b045200c.js";const{t:z}=a(),G={confirmLoading:n.bool,showCancelBtn:n.bool.def(!0),cancelButtonProps:Object,cancelText:n.string.def(z("common.cancelText")),showOkBtn:n.bool.def(!0),okButtonProps:Object,okText:n.string.def(z("common.okText")),okType:n.string.def("primary"),showFooter:n.bool,footerHeight:{type:[String,Number],default:60}},J=r({isDetail:n.bool,title:n.string.def(""),loadingText:n.string,showDetailBack:n.bool.def(!0),visible:n.bool,loading:n.bool,maskClosable:n.bool.def(!0),getContainer:{type:[Object,String]},scrollOptions:{type:Object,default:null},closeFunc:{type:[Function,Object],default:null},triggerWindowResize:n.bool,destroyOnClose:n.bool},G);var K=i({name:"BasicDrawerFooter",props:r(r({},G),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:t}){const{prefixCls:o}=c("basic-drawer-footer");return{handleOk:function(){t("ok")},prefixCls:o,handleClose:function(){t("close")},getStyle:u((()=>{const t=`${e.height}`;return{height:t,lineHeight:t}}))}}});K.render=function(e,t,o,s,l,r){const a=p("a-button");return e.showFooter||e.$slots.footer?(d(),f("div",{key:0,class:e.prefixCls,style:e.getStyle},[e.$slots.footer?b(e.$slots,"footer",{key:1}):(d(),f(g,{key:0},[b(e.$slots,"insertFooter"),e.showCancelBtn?(d(),f(a,h({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:w((()=>[v(C(e.cancelText),1)])),_:1},16,["onClick"])):m("v-if",!0),b(e.$slots,"centerFooter"),e.showOkBtn?(d(),f(a,h({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:w((()=>[v(C(e.okText),1)])),_:1},16,["type","onClick","loading"])):m("v-if",!0),b(e.$slots,"appendFooter")],64))],6)):m("v-if",!0)};var Q=i({name:"BasicDrawerHeader",components:{BasicTitle:k,ArrowLeftOutlined:q},props:{isDetail:n.bool,showDetailBack:n.bool,title:n.string},emits:["close"],setup(e,{emit:t}){const{prefixCls:o}=c("basic-drawer-header");return{prefixCls:o,handleClose:function(){t("close")}}}});const W={key:1};Q.render=function(e,t,o,s,l,r){const a=p("BasicTitle"),n=p("ArrowLeftOutlined");return e.isDetail?(d(),f("div",{key:1,class:[e.prefixCls,`${e.prefixCls}--detail`]},[y("span",{class:`${e.prefixCls}__twrap`},[e.showDetailBack?(d(),f("span",{key:0,onClick:t[1]||(t[1]=(...t)=>e.handleClose&&e.handleClose(...t))},[y(n,{class:`${e.prefixCls}__back`},null,8,["class"])])):m("v-if",!0),e.title?(d(),f("span",W,C(e.title),1)):m("v-if",!0)],2),y("span",{class:`${e.prefixCls}__toolbar`},[b(e.$slots,"titleToolbar")],2)],2)):(d(),f(a,{key:0,class:e.prefixCls},{default:w((()=>[b(e.$slots,"title"),v(" "+C(e.$slots.title?"":e.title),1)])),_:3},8,["class"]))};var Y=i({components:{Drawer:X,ScrollContainer:D,DrawerFooter:K,DrawerHeader:Q},inheritAttrs:!1,props:J,emits:["visible-change","ok","close","register"],setup(e,{emit:t}){const o=x(!1),s=O(),l=x(null),{t:n}=a(),{prefixVar:i,prefixCls:p}=c("basic-drawer"),d={setDrawerProps:function(e){l.value=$(P(l)||{},e),Reflect.has(e,"visible")&&(o.value=!!e.visible)},emitVisible:void 0},f=S();f&&t("register",d,f.uid);const g=u((()=>$(B(e),P(l)))),b=u((()=>{const e=r(r(r({placement:"right"},P(s)),P(g)),{visible:P(o)});e.title=void 0;const{isDetail:t,width:l,wrapClassName:a,getContainer:n}=e;if(t){l||(e.width="100%");const t=`${p}__detail`;e.wrapClassName=a?`${a} ${t}`:t,n||(e.getContainer=`.${i}-layout-content`)}return e})),h=u((()=>r(r({},s),P(b)))),w=u((()=>{const{footerHeight:e,showFooter:t}=P(b);return t&&e?T(e)?`${e}px`:`${e.replace("px","")}px`:"0px"})),v=u((()=>({position:"relative",height:`calc(100% - ${P(w)})`}))),C=u((()=>{var e;return!!(null==(e=P(b))?void 0:e.loading)}));return _((()=>{o.value=e.visible})),F((()=>o.value),(e=>{j((()=>{var o;t("visible-change",e),f&&(null==(o=d.emitVisible)||o.call(d,e,f.uid))}))})),{onClose:function(e){return s=this,l=null,r=function*(){const{closeFunc:s}=P(b);if(t("close",e),s&&L(s)){const e=yield s();o.value=!e}else o.value=!1},new Promise(((t,o)=>{var a=t=>{try{i(r.next(t))}catch(e){o(e)}},n=t=>{try{i(r.throw(t))}catch(e){o(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(s,l)).next())}));var s,l,r},t:n,prefixCls:p,getMergeProps:g,getScrollContentStyle:v,getProps:b,getLoading:C,getBindValues:h,getFooterHeight:w,handleOk:function(){t("ok")}}}});Y.render=function(e,t,o,s,l,r){const a=p("DrawerHeader"),n=p("ScrollContainer"),i=p("DrawerFooter"),c=p("Drawer"),u=H("loading");return d(),f(c,h({class:e.prefixCls,onClose:e.onClose},e.getBindValues),V({default:w((()=>[A(y(n,{style:e.getScrollContentStyle,"loading-tip":e.loadingText||e.t("common.loadingText")},{default:w((()=>[b(e.$slots,"default")])),_:3},8,["style","loading-tip"]),[[u,e.getLoading]]),y(i,h(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),V({_:2},[I(Object.keys(e.$slots),(t=>({name:t,fn:w((o=>[b(e.$slots,t,o)]))})))]),1040,["onClose","onOk","height"])])),_:2},[e.$slots.title?void 0:{name:"title",fn:w((()=>[y(a,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:w((()=>[b(e.$slots,"titleToolbar")])),_:1},8,["title","isDetail","showDetailBack","onClose"])]))}]),1040,["class","onClose"])};const U=M({}),Z=M({});function ee(){const e=x(null),t=x(!1),o=x("");const s=()=>{const t=P(e);return t||R("useDrawer instance is undefined!"),t};return[function(s,l){P(t)&&N()&&s===P(e)||(o.value=l,e.value=s,t.value=!0,s.emitVisible=(e,t)=>{Z[t]=e})},{setDrawerProps:e=>{var t;null==(t=s())||t.setDrawerProps(e)},getVisible:u((()=>Z[~~P(o)])),openDrawer:(e=!0,t,l=!0)=>{var r;if(null==(r=s())||r.setDrawerProps({visible:e}),!t)return;if(l)return U[P(o)]=null,void(U[P(o)]=B(t));E(B(U[P(o)]),B(t))||(U[P(o)]=B(t))}}]}const te=e=>{const t=x(null),o=S(),s=x("");o||R("useDrawerInner instance is undefined!");const l=()=>{const e=P(t);if(e)return e;R("useDrawerInner instance is undefined!")};return _((()=>{const t=U[P(s)];t&&e&&L(e)&&j((()=>{e(t)}))})),[(e,l)=>{s.value=l,t.value=e,null==o||o.emit("register",e,l)},{changeLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({confirmLoading:e})},getVisible:u((()=>Z[~~P(s)])),closeDrawer:()=>{var e;null==(e=l())||e.setDrawerProps({visible:!1})},setDrawerProps:e=>{var t;null==(t=l())||t.setDrawerProps(e)}}]};export{Y as _,te as a,ee as u};
