import{e,dz as o,e4 as t,e5 as r,z as s,r as a,o as n,m as i,n as d,D as c,p as l}from"./index.e3ab3d33.js";import{_ as p,u as m}from"./useTable.60891a80.js";import{k as u}from"./useForm.4c49c850.js";import{b as j}from"./useModal.ee72b48f.js";import b from"./Modal.a5049143.js";import{d as f}from"./download.00911bd8.js";import{c as v}from"./data.654cca53.js";import"./vendor.afa0338c.js";import"./index.002624d4.js";import"./index.69962a4d.js";import"./warning.0b2da52a.js";import"./index.2561698d.js";import"./get.92310d4b.js";import"./useWindowSizeFn.24a861a8.js";import"./onMountedOrActivated.b2e3d7a3.js";import"./index.5a1e8da2.js";import"./useSortable.fc3e13de.js";import"./RedoOutlined.2b7b81e2.js";import"./_baseIteratee.3a82d812.js";import"./FullscreenOutlined.b1e97c8e.js";import"./scrollTo.c1e0f75f.js";import"./transButton.eec12e03.js";import"./index.c9e49986.js";import"./index.ec624549.js";import"./responsiveObserve.c545f1cc.js";import"./index.40de8c80.js";import"./CountdownInput.4bcf5023.js";import"./index.dfffa629.js";import"./index.vue_vue&type=script&lang.1c5306c2.js";var w=e({components:{BasicTable:p,Modal:b,TableAction:u},setup(){const{createMessage:e}=s(),{VITE_GLOB_API_URL:a}=o(),[n,{openModal:i}]=j(),[d,{reload:c}]=m({title:"项目列表",api:r,columns:v(),showIndexColumn:!0,bordered:!1,actionColumn:{width:200,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});return{registerTable:d,viewDetails:function(e){i(!0,{record:e})},registerModal:n,openModal:i,handleSuccess:function(){c()},download:e=>{f({url:`${a}/project/downLoadBP?projectNo=${e.projectNo}`,fileName:e.projectNm})},handleDelete:o=>{return r=this,s=null,a=function*(){200===(yield t({projectNo:o.projectNo})).code&&(e.success("删除成功！"),c())},new Promise(((e,o)=>{var t=e=>{try{i(a.next(e))}catch(t){o(t)}},n=e=>{try{i(a.throw(e))}catch(t){o(t)}},i=o=>o.done?e(o.value):Promise.resolve(o.value).then(t,n);i((a=a.apply(r,s)).next())}));var r,s,a},deleteProject:t}}});const x={class:"p-4"};w.render=function(e,o,t,r,s,p){const m=a("TableAction"),u=a("BasicTable"),j=a("Modal");return n(),i("div",x,[d(u,{showTableSetting:"",onRegister:e.registerTable},{action:c((({record:o})=>[l(' <a-button v-if="record.bpRoute" class="mr-3" shape="round" @click="download(record)"\n          >下载BP</a-button\n        >\n        <a-button type="primary" shape="round" @click="viewDetails(record)">查看详情</a-button> '),d(m,{actions:[{label:o.bpRoute?"下载BP":null,onClick:e.download.bind(null,o)},{label:"查看详情",onClick:e.viewDetails.bind(null,o)},{label:"删除",popConfirm:{title:"确认删除",confirm:e.handleDelete.bind(null,o)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),d(j,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])};export default w;
