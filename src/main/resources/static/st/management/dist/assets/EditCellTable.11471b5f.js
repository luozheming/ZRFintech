import{e,dD as t,dz as a,e1 as o,dB as s,e2 as n,dY as r,ax as i,z as d,r as l,o as c,m,n as p,D as u,E as f,F as j}from"./index.e3ab3d33.js";import{_ as b,u as h}from"./useTable.60891a80.js";import"./useForm.4c49c850.js";import{b as x}from"./useModal.ee72b48f.js";import v from"./Modal.5e0dedf3.js";import{A as g}from"./index.19c35a2b.js";import"./vendor.afa0338c.js";import"./index.002624d4.js";import"./index.69962a4d.js";import"./warning.0b2da52a.js";import"./index.2561698d.js";import"./get.92310d4b.js";import"./useWindowSizeFn.24a861a8.js";import"./onMountedOrActivated.b2e3d7a3.js";import"./index.5a1e8da2.js";import"./useSortable.fc3e13de.js";import"./RedoOutlined.2b7b81e2.js";import"./_baseIteratee.3a82d812.js";import"./FullscreenOutlined.b1e97c8e.js";import"./scrollTo.c1e0f75f.js";import"./transButton.eec12e03.js";import"./index.c9e49986.js";import"./index.ec624549.js";import"./responsiveObserve.c545f1cc.js";import"./index.40de8c80.js";import"./CountdownInput.4bcf5023.js";import"./download.00911bd8.js";import"./index.dfffa629.js";const w=[{title:"投资人姓名",dataIndex:"investor",editComponentProps:{prefix:"$"},width:100},{title:"头像",dataIndex:"invesPhotoRoute",width:200,slots:{customRender:"avatar"}},{title:"手机号",dataIndex:"phoneNm",width:100}];var C=e({components:{BasicTable:b,Modal:v,Avatar:g,[t.name]:t},setup(){const e=i(),{createMessage:t}=d(),{VITE_GLOB_API_URL:l}=a(),[c,{openModal:m}]=x(),[p,{reload:u}]=h({title:"投资人列表",api:o,columns:w,showIndexColumn:!0,bordered:!1,size:"small",actionColumn:{width:200,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});return{registerTable:p,handleDetail:function(e){m(!0,{record:e})},registerModal:c,handleCreate:function(){e("/investor/add")},openModal:m,handleSuccess:function(){u()},onChange:e=>{return a=this,o=null,i=function*(){let a=0===(e.status?e.status:0)?1:0;const o=yield s({url:l+n,method:"post",data:{investorId:e.investorId,status:a},transformRequest:[function(e){return e=r.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{code:i,message:d}=o.data;200===i?u():t.warning(d)},new Promise(((e,t)=>{var s=e=>{try{r(i.next(e))}catch(a){t(a)}},n=e=>{try{r(i.throw(e))}catch(a){t(a)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,n);r((i=i.apply(a,o)).next())}));var a,o,i}}}});const y=f(" 新增投资人 "),I=f("查看详情");C.render=function(e,t,a,o,s,n){const r=l("a-button"),i=l("Avatar"),d=l("a-popconfirm"),b=l("BasicTable"),h=l("Modal");return c(),m("div",null,[p(b,{showTableSetting:"",onRegister:e.registerTable},{toolbar:u((()=>[p(r,{type:"primary",onClick:e.handleCreate},{default:u((()=>[y])),_:1},8,["onClick"])])),avatar:u((({record:e})=>[p(i,{size:64,src:`data:image/png;base64,${e.photo}`},null,8,["src"])])),action:u((({record:t})=>[p(r,{class:"mr-2",type:"primary",disabled:1===t.status,shape:"round",onClick:a=>e.handleDetail(t)},{default:u((()=>[I])),_:2},1032,["disabled","onClick"]),p(d,{title:`是否对该投资人${1===t.status?"启用":"禁用"}权限?`,onConfirm:a=>e.onChange(t)},{default:u((()=>[p(r,{type:t.status?"primary":"",shape:"round"},{default:u((()=>[f(j(1===t.status?"启用":"禁用")+"权限",1)])),_:2},1032,["type"])])),_:2},1032,["title","onConfirm"])])),_:1},8,["onRegister"]),p(h,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])};export default C;
