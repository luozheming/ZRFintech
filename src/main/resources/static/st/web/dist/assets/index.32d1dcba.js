import e from "./DetailModal.6f99748e.js";import{_ as r,u as o}from "./useTable.2851cd85.js";import{k as t}from "./useForm.65eee8c3.js";import{u as a}from "./useModal.e875d135.js";import{e as i,p as s,j as n,aW as l,X as c,W as d,dM as m,r as u,o as p,m as f,F as j,aP as b,z as g,A as x,n as y,C as v,D as E,E as h}from "./index.2da64865.js";import{getColumns as w}from "./data.6c653105.js";import"./responsiveObserve.c545f1cc.js";import"./get.498bc099.js";import"./index.2ccd4c5a.js";import"./scrollTo.c1e0f75f.js";import"./onMountedOrActivated.d065d4ea.js";import"./index.da5aa414.js";import"./RedoOutlined.e4a50862.js";import"./_baseIteratee.aeb63f7c.js";import"./index.a825569d.js";import"./useWindowSizeFn.be34850b.js";import"./index.ca3908e8.js";import"./useSortable.1f87e7ef.js";import"./FullscreenOutlined.e9192cae.js";import"./index.5b683308.js";import"./index.84a07778.js";import"./vendor.afa0338c.js";import"./index.a05075a5.js";import"./index.d89f2e53.js";import"./CountdownInput.f59ea897.js";import"./download.fd994412.js";var C=i({name:"ErrorHandler",components:{DetailModal:e,BasicTable:r,TableAction:t},setup(){const e=s(),r=s([]),{t:t}=n(),[i,{setTableData:u}]=o({title:t("sys.errorLog.tableTitle"),columns:w(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[p,{openModal:f}]=a();return l((()=>m.getErrorInfoState),(e=>{c((()=>{u(d(e))}))}),{immediate:!0}),{register:i,registerModal:p,handleDetail:function(r){e.value=r,f(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){r.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,r=null,o=function*(){},new Promise(((t, a)=>{var i= e=>{try{n(o.next(e))}catch(r){a(r)}},s= e=>{try{n(o.throw(e))}catch(r){a(r)}},n= e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);n((o=o.apply(e,r)).next())}));var e,r,o},imgList:r,rowInfo:e,t:t}}});const k={class:"p-4"};C.render=function(e, r, o, t, a, i){const s=u("DetailModal"),n=u("a-button"),l=u("TableAction"),c=u("BasicTable");return p(),f("div",k,[(p(!0),f(j,null,b(e.imgList,(e=>g((p(),f("img",{key:e,src:e},null,8,["src"])),[[x,!1]]))),128)),y(s,{info:e.rowInfo,onRegister:e.registerModal},null,8,["info","onRegister"]),y(c,{onRegister:e.register,class:"error-handle-table"},{toolbar:v((()=>[y(n,{onClick:e.fireVueError,type:"primary"},{default:v((()=>[E(h(e.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),y(n,{onClick:e.fireResourceError,type:"primary"},{default:v((()=>[E(h(e.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),y(n,{onClick:e.fireAjaxError,type:"primary"},{default:v((()=>[E(h(e.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:v((({record:r})=>[y(l,{actions:[{label:e.t("sys.errorLog.tableActionDesc"),onClick:e.handleDetail.bind(null,r)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default C;
