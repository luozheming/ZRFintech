var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,l=(e,l)=>{for(var a in l||(l={}))t.call(l,a)&&r(e,a,l[a]);if(n)for(var a of n(l))o.call(l,a)&&r(e,a,l[a]);return e};import{_ as a}from "./useModal.e875d135.js";import{n as s,a3 as c,Y as i,a4 as u,dN as d,dO as p,F as f,a7 as m,e as b,a8 as v,R as y,S as h,p as x,ag as g,ah as j,bV as C,a6 as w,af as O,aI as P,g as D,df as S,k,v as I,aY as M,a0 as E,aq as z,cI as L,dP as N,b1 as W,cL as A,j as B,r as V,o as $,m as F,C as R}from "./index.2da64865.js";import{r as Y,a as _}from "./responsiveObserve.c545f1cc.js";import{g as q}from "./get.498bc099.js";import{getDescSchema as G}from "./data.6c653105.js";import"./useWindowSizeFn.be34850b.js";import"./FullscreenOutlined.e9192cae.js";import"./vendor.afa0338c.js";import"./index.d89f2e53.js";function H(e, t, n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return null!=e}var K=function(e){var t,n=e.itemPrefixCls,o=e.component,r=e.span,l=e.bordered,a=e.label,c=e.content,i=e.colon,u=o;return l?s(u,{class:[(t={},H(t,"".concat(n,"-item-label"),J(a)),H(t,"".concat(n,"-item-content"),J(c)),t)],colSpan:r},{default:function(){return[J(a)?a:c]}}):s(u,{class:["".concat(n,"-item")],colSpan:r},{default:function(){return[a&&s("span",{class:["".concat(n,"-item-label"),H({},"".concat(n,"-item-no-colon"),!i)]},[a]),c&&s("span",{class:"".concat(n,"-item-content")},[c])]}})},Q=function(e){var t=function(e, t, n){var o=t.colon,r=t.prefixCls,l=t.bordered,a=n.component,f=n.type,m=n.showLabel,b=n.showContent;return e.map((function(e, t){var n=c(e),v=n.prefixCls,y=void 0===v?r:v,h=n.span,x=void 0===h?1:h,g=i(e,"label"),j=u(e),C=d(e),w=p(e),O=e.key;return"string"==typeof a?s(K,{key:"".concat(f,"-").concat(O||t),class:C,style:w,span:x,colon:o,component:a,itemPrefixCls:y,bordered:l,label:m?g:null,content:b?j:null},null):[s(K,{key:"label-".concat(O||t),class:C,style:w,span:1,colon:o,component:a[0],itemPrefixCls:y,bordered:l,label:g},null),s(K,{key:"content-".concat(O||t),class:C,style:w,span:2*x-1,component:a[1],itemPrefixCls:y,bordered:l,content:j},null)]}))},n=e.prefixCls,o=e.vertical,r=e.row,l=e.index,a=e.bordered;return o?s(f,null,[s("tr",{key:"label-".concat(l),class:"".concat(n,"-row")},[t(r,e,{component:"th",type:"label",showLabel:!0})]),s("tr",{key:"content-".concat(l),class:"".concat(n,"-row")},[t(r,e,{component:"td",type:"content",showContent:!0})])]):s("tr",{key:l,class:"".concat(n,"-row")},[t(r,e,{component:a?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0})])};function T(e, t, n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}m.string,m.any,m.number;var X=b({name:"ADescriptionsItem",props:{prefixCls:m.string,label:m.VNodeChild,span:m.number.def(1)},render:function(){return null}}),Z={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function ee(e, t, n){var o=e;return(void 0===t||t>n)&&(o=w(e,{span:n}),O(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}var te={prefixCls:m.string,bordered:m.looseBool,size:m.oneOf(v("default","middle","small")).def("default"),title:m.VNodeChild,extra:m.VNodeChild,column:{type:[Number,Object],default:function(){return Z}},layout:m.oneOf(v("horizontal","vertical")),colon:m.looseBool},ne=b({name:"ADescriptions",Item:X,setup:function(e, t){var n,o=t.slots,r=y("configProvider",h).getPrefixCls,l=x({});return g((function(){n=Y.subscribe((function(t){"object"===U(e.column)&&(l.value=t)}))})),j((function(){Y.unsubscribe(n)})),function(){var t,n,a,c,i=e.prefixCls,u=e.column,d=e.size,p=e.bordered,f=void 0!==p&&p,m=e.layout,b=void 0===m?"horizontal":m,v=e.colon,y=void 0===v||v,h=e.title,x=void 0===h?null===(n=o.title)||void 0===n?void 0:n.call(o):h,g=e.extra,j=void 0===g?null===(a=o.extra)||void 0===a?void 0:a.call(o):g,w=r("descriptions",i),O=function(e, t){if("number"==typeof e)return e;if("object"===U(e))for(var n=0; n<_.length; n++){var o=_[n];if(t[o]&&void 0!==e[o])return e[o]||Z[o]}return 3}(u,l.value),P=function(e, t){var n=C(e),o=[],r=[],l=t;return n.forEach((function(e, a){var s,c=null===(s=e.props)||void 0===s?void 0:s.span,i=c||1;if(a===n.length-1)return r.push(ee(e,c,l)),void o.push(r);i<l?(l-=i,r.push(e)):(r.push(ee(e,i,l)),o.push(r),l=t,r=[])})),o}(null===(c=o.default)||void 0===c?void 0:c.call(o),O);return s("div",{class:[w,(t={},T(t,"".concat(w,"-").concat(d),"default"!==d),T(t,"".concat(w,"-bordered"),!!f),t)]},[(x||j)&&s("div",{class:"".concat(w,"-header")},[s("div",{class:"".concat(w,"-title")},[x]),s("div",{class:"".concat(w,"-extra")},[j])]),s("div",{class:"".concat(w,"-view")},[s("table",null,[s("tbody",null,[P.map((function(e, t){return s(Q,{key:t,index:t,colon:y,prefixCls:w,vertical:"vertical"===b,bordered:f,row:e},null)}))])])])])}}});ne.props=te,ne.install=function(e){return e.component(ne.name,ne),e.component(ne.Item.name,ne.Item),e};var oe=b({name:"Description",props:{useCollapse:P.bool.def(!0),title:P.string.def(""),size:P.oneOf(["small","default","middle",void 0]).def("small"),bordered:P.bool.def(!0),column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:P.object},emits:["register"],setup(e, {slots:t,emit:n}){const o=x(null),{prefixCls:r}=D("description"),a=S(),c=k((()=>l(l({},e),I(o)))),i=k((()=>l(l({},I(c)),{title:void 0}))),u=k((()=>!!I(c).title)),d=k((()=>l({canExpand:!1},I(i).collapseOptions))),p=k((()=>l(l({},I(a)),I(i))));function f({label:e,labelMinWidth:t,labelStyle:n}){if(!n&&!t)return e;const o=l(l({},n),{minWidth:`${t}px `});return s("div",{style:o},[e])}const m=()=>{let e;return s(ne,z({class:`${r}`},I(p)),"function"==typeof(t=e=function(){const{schema:e,data:t}=I(i);return I(e).map((e=>{const{render:n,field:o,span:r,show:l,contentMinWidth:a}=e;if(l&&M(l)&&!l(t))return null;const c=()=>{var e;const t=null==(e=I(i))?void 0:e.data;if(!t)return null;const r=q(t,o);return M(n)?n(r,t):null!=r?r:""},u=a;return s(ne.Item,{label:f(e),key:o,span:r},{default:()=>a?s("div",{style:{minWidth:`${u}px`}},[c()]):c()})})).filter((e=>!!e))}())||"[object Object]"===Object.prototype.toString.call(t)&&!E(t)?e:{default:()=>[e]});var t};return n("register",{setDescProps:function(e){o.value=l(l({},I(o)),e)}}),()=>I(u)?(()=>{const n=e.useCollapse?m():s("div",null,[m()]);if(!e.useCollapse)return n;const{canExpand:o,helpMessage:r}=I(d),{title:l}=I(c);return s(N,{title:l,canExpan:o,helpMessage:r},{default:()=>n,action:()=>L(t,"action")})})():m()}});var re=b({name:"ErrorLogDetailModal",components:{BasicModal:a,Description:oe},props:{info:{type:Object,default:null}},setup(){const{t:e}=B(),[t]=function(e){if(!W())throw new Error("Please put useDescription function in the setup function!");const t=x(null),n=x(!1);return[function(o){I(n)&&A()||(t.value=o,e&&o.setDescProps(e),n.value=!0)},{setDescProps: e=>{var n;null==(n=I(t))||n.setDescProps(e)}}]}({column:2,schema:G()});return{register:t,useI18n:B,t:e}}});re.render=function(e, t, n, o, r, l){const a=V("Description"),c=V("BasicModal");return $(),F(c,z({width:800,title:e.t("sys.errorLog.tableActionDesc")},e.$attrs),{default:R((()=>[s(a,{data:e.info,onRegister:e.register},null,8,["data","onRegister"])])),_:1},16,["title"])};export default re;
